<launch>
    
    <!-- Evaluation script, this should be on top of the launch file -->
    <group>
        <remap from="/tracking_timing_metrics" to="/spencer/perception_internal/people_tracking/srl_nearest_neighbor_tracker/tracking_timing_metrics"/>
        <include file="$(find srl_nearest_neighbor_tracker)/launch/icra16_experiments/schiphol03/schiphol03_evaluation.launch">
            <arg name="evaluation_prefix" value="schiphol03/all_modalities/nnt/with_low_confidence_obs_and_geodesics"/>
            <arg name="all_modalities" value="true"/>
            <arg name="rate" value="0.75"/>
        </include>
    </group>
    

    <!-- Tracker -->

    <include file="$(find spencer_people_tracking_launch)/launch/freiburg_people_tracking.launch">
        <arg name="rgbd" value="true"/>
        <arg name="static_map_filter" value="false"/>
        <arg name="fuse_detections" value="false"/>  <!-- important, since we use pre-recorded detections -->
        <arg name="laser_low_confidence_detections" value="true"/>
        <arg name="occlusion_geodesics" value="true"/>
        <arg name="subscriber_queue_size" value="3"/>
    </include>

    <!-- Overwrite some params required for occlusion geodesics with two laser scanners -->

    <rosparam param="/spencer/perception_internal/people_tracking/srl_nearest_neighbor_tracker/occlusion_manager_number_lasers">2</rosparam>
    <rosparam param="/spencer/perception_internal/people_tracking/srl_nearest_neighbor_tracker/occlusion_manager_segmentation_topic_1">/spencer/perception_internal/people_detection/laser_rear/laser_segmentation_unfiltered</rosparam>
    <rosparam param="/spencer/perception_internal/people_tracking/srl_nearest_neighbor_tracker/occlusion_manager_laser_topic_1">/spencer/sensors/laser_rear/echo0</rosparam>

    <!-- Run laser detectors: the detections will actually go unused and are already fused in the recorded bagfile, but we are interested in the segmentation which is missing -->
    <include file="$(find spencer_people_tracking_launch)/launch/laser_detectors.launch">
        <arg name="rear" value="true"/>
    </include>

</launch>